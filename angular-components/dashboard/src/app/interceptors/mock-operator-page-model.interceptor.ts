import { Injectable, Injector } from '@angular/core';

import {
  HttpRequest,
  HttpHandler,
  HttpEvent,
  HttpInterceptor,
  HttpResponse
} from '@angular/common/http';
import { Observable, of } from 'rxjs';

const mockRetentionPolicyForStorageAccount =  {"id":"82ce38f2-9afe-4f4e-9e3c-b9aeace6b23e","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":false,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":false,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":false,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"cbcb74f5-284b-4fbc-b381-0fb6f53c776a","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"bb701a64-ecac-4207-89fa-c86ffdab4e67","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"06f24c17-b9e0-4405-b8a3-368165a4dad2","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"be26d8a7-421f-4567-80a2-170320ece262","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"1390f05f-8c6f-4152-b973-25edc5668c50","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"e55e09f7-403c-4918-a80f-c32e908e709c","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage","mostRecentEntityTimestamp":"0001-01-01T00:00:00","leastRecentEntityTimestamp":"0001-01-01T00:00:00","entityTimestampLowWatermark":"0001-01-01T00:00:00","entityTimestampHighWatermark":"0001-01-01T00:00:00"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1HP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228","WADMetricsPT1MP10DV2S20210218"]}};

const mockCurrentJobOutput ={"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","RetentionPolicyTuples":{"Item1":{"id":"da590fe0-d90c-4581-9805-144a52e82332","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"Item2":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}},"tableStorageRetentionPolicy":{"id":"dcf554f1-1f96-4024-96af-efcc3dc22166","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}

const mockMetricsRetentionPolicyEnforcementResult = {};

const mockWorkflowCheckpoint = {"TimeStamp":"2021-07-09T00:54:19.5944985Z","CurrentCheckpoint":1,"Messsage":"manage your device","AvailableCommands":[{"availableCommandId":"a442d06c-1581-4e3a-9c8e-9b647f346376","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":0,"commandParameterJson":null,"worklowOperationDisplayMessage":"Please Initialize The Appliance","menuLabel":"Provision Appliance"},{"availableCommandId":"6d00c181-4788-46c4-9d19-266a011c69f1","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":7,"commandParameterJson":null,"worklowOperationDisplayMessage":"Delete's The Appliance Configuration","menuLabel":"Cancel Workflow"},{"availableCommandId":"345f9d49-3592-4aaa-abee-5e9bb1f5b3c0","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":4,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to calculate storage consumption by azure diagnostics over time","menuLabel":"Inventory Storage Account Entities Usage Over Time"},{"availableCommandId":"70a811da-1d74-4341-bb0e-701084ba63db","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Accounts"},{"availableCommandId":"070c4b65-53b0-42e3-869d-e6c288ff50f7","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions that have azure diagnostics entities","menuLabel":"Inventory Storage Account Entities"},{"availableCommandId":"691b8768-3bca-4e1f-b75f-eb547ba95ea2","userOid":"0c0481e0-cb4d-4086-8ef7-3e4930709a27","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":2,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Permissions"}],"SubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","SubscriptionName":null}

const mockOperatorPagemodel = {"tenantid":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","oid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","applianceAPIEndPoint":null,"easyAuthAccessToken":"eyJhbGc","queryWorkflowCheckpointStatusEndpoint":"QueryWorkflowCheckpointStatus/95e34c7e-8f5f-4379-bb63-4cb2e7944f3c/576bbe84-5a45-45e3-b578-b97b07d8f9ba","allScopes":null,"subscriptions":[{"isSelected":false,"requestingAzureAdUserOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267","authorizationSource":"RoleBased","managedByTenants":[],"subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","displayName":"usataxlabs.app subscription","state":"Enabled","subscriptionPolicies":{"locationPlacementId":"Public_2014-09-01","quotaId":"PayAsYouGo_2014-09-01","spendingLimit":"Off"}}],"applianceUrl":["http://localhost:7071/api/"],"orchestrations":[{"name":"DebugWorkflowEntryPoint","instanceId":"c068459d-d209-ab03-10e3-3ea9953a0264","createdTime":"2021-07-10T15:47:58.7884742Z","lastUpdatedTime":"2021-07-10T15:50:45.0623227Z","input":"{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.ApplianceSessionContextEntity, com.ataxlab.functions.table.retention\",\"id\":\"0d7462ae-3594-47a6-b796-82c7cb82c4b8\",\"selectedSubscriptionId\":\"c295568c-70fe-4146-8bbc-63ef324fa267\",\"selectedStorageAccounts\":[{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":\"0e76962f-fa9d-4b5b-8086-62c8388aac46\",\"isSelected\":true,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":\"c295568c-70fe-4146-8bbc-63ef324fa267\",\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":\"eastus\",\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":\"Microsoft.Storage/storageAccounts\",\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"}],\"userOid\":\"0e76962f-fa9d-4b5b-8086-62c8388aac46\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\",\"operationResult\":null,\"jobOutput\":[],\"currentJobOutput\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.ApplianceJobOutputEntity, com.ataxlab.functions.table.retention\",\"id\":\"91bf6bfc-c3c2-49b6-8878-f27baeb1341c\",\"retentionPolicyJobs\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.RetentionPolicyTupleContainerEntity, com.ataxlab.functions.table.retention\",\"id\":\"1c8f993e-7d71-4372-ab98-f2106d5199ab\",\"RetentionPolicyTuples\":{\"$type\":\"System.Tuple`2[[com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention],[com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention]], System.Private.CoreLib\",\"Item1\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"331c9485-4dee-4712-b057-971fb3947407\",\"tableStorageEntityRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageEntityRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"e4a7b35f-4cb4-4238-b7e4-4a34cb218442\",\"PolicyEnforcementMode\":0,\"NumberOfDays\":30,\"oldestRetainedEntity\":\"0001-01-01T00:00:00\",\"mostRecentRetainedEntity\":\"0001-01-01T00:00:00\",\"diagnosticsRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"dabf246b-cd34-47b9-8e55-2e3b13056855\",\"diagnosticsRetentionSurfaceEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":0,\"itemType\":0,\"itemDescription\":\"Syslog, Linux Virtual Machines\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"1c689fbb-7ae2-44b5-a530-25d19f14c3f0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"LinuxsyslogVer2v0\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":6,\"itemType\":0,\"itemDescription\":\"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"e8a533c4-ab0f-409c-9cf2-07f4b5118405\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADWindowsEventLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":7,\"itemType\":0,\"itemDescription\":\"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADETWEventTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":4,\"itemType\":0,\"itemDescription\":\"Logs written in code using the trace listener.\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"cd1b60e4-8096-4e50-a89e-91d2fec16b65\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WadLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"82ecdf12-7600-4c8f-b695-3ef2f0500abd\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"112672ee-9f51-4a8b-84ba-9235dc2cbac4\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":5,\"itemType\":0,\"itemDescription\":\"Performance counters.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"78ea85e7-257a-4d2a-b4b6-a89eb5713b81\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADPerformanceCountersTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"}]},\"TableNames\":[\"LinuxsyslogVer2v0\",\"WADWindowsEventLogsTable\",\"WADETWEventTable\",\"WadLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADPerformanceCountersTable\"]},\"tableStorageTableRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageTableRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"wADMetricsTableNames\":[],\"id\":\"72006b01-e06b-46d9-bd04-b28a3d3e0bb7\",\"wADMetricsTableNamePrefix\":\"WADMetrics\",\"metricRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"83a521c5-9b0a-4bde-844b-28ae1e097d59\",\"aggregationPrefixes\":[\"PT1H\",\"PT1M\"],\"metricsRetentionSurfaceItemEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"c2edb99b-1677-4897-81ff-3fbb37d08a41\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"5d5112bd-8145-427f-8f1e-ff2a396f210a\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"28694c9a-00b5-4098-86e5-b83f5118a08b\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"3d30730a-6c68-4a1d-9181-a23e2aaeccc1\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"}]},\"policyEnforcementMode\":0,\"deleteOlderTablesThanCurrentMonthMinusThis\":12,\"oldestRetainedTable\":\"0001-01-01T00:00:00\",\"mostRecentRetainedTable\":\"0001-01-01T00:00:00\",\"tableNames\":[\"WADMetricsPT1HP10DV2S20210218\",\"WADMetricsPT1HP10DV2S20210228\",\"WADMetricsPT1MP10DV2S20210218\",\"WADMetricsPT1MP10DV2S20210228\"]}},\"Item2\":{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":null,\"isSelected\":false,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":null,\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":null,\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":null,\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"}},\"tableStorageRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"0e48332e-cec5-4c3d-9de2-b03b1a3dbd33\",\"tableStorageEntityRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageEntityRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"e4a7b35f-4cb4-4238-b7e4-4a34cb218442\",\"PolicyEnforcementMode\":0,\"NumberOfDays\":30,\"oldestRetainedEntity\":\"0001-01-01T00:00:00\",\"mostRecentRetainedEntity\":\"0001-01-01T00:00:00\",\"diagnosticsRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"dabf246b-cd34-47b9-8e55-2e3b13056855\",\"diagnosticsRetentionSurfaceEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":0,\"itemType\":0,\"itemDescription\":\"Syslog, Linux Virtual Machines\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"1c689fbb-7ae2-44b5-a530-25d19f14c3f0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"LinuxsyslogVer2v0\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":6,\"itemType\":0,\"itemDescription\":\"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"e8a533c4-ab0f-409c-9cf2-07f4b5118405\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADWindowsEventLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":7,\"itemType\":0,\"itemDescription\":\"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADETWEventTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":4,\"itemType\":0,\"itemDescription\":\"Logs written in code using the trace listener.\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"cd1b60e4-8096-4e50-a89e-91d2fec16b65\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WadLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"82ecdf12-7600-4c8f-b695-3ef2f0500abd\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"112672ee-9f51-4a8b-84ba-9235dc2cbac4\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":5,\"itemType\":0,\"itemDescription\":\"Performance counters.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"78ea85e7-257a-4d2a-b4b6-a89eb5713b81\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADPerformanceCountersTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"}]},\"TableNames\":[\"LinuxsyslogVer2v0\",\"WADWindowsEventLogsTable\",\"WADETWEventTable\",\"WadLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADPerformanceCountersTable\"]},\"tableStorageTableRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageTableRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"wADMetricsTableNames\":[],\"id\":\"72006b01-e06b-46d9-bd04-b28a3d3e0bb7\",\"wADMetricsTableNamePrefix\":\"WADMetrics\",\"metricRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"83a521c5-9b0a-4bde-844b-28ae1e097d59\",\"aggregationPrefixes\":[\"PT1H\",\"PT1M\"],\"metricsRetentionSurfaceItemEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"c2edb99b-1677-4897-81ff-3fbb37d08a41\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"5d5112bd-8145-427f-8f1e-ff2a396f210a\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"28694c9a-00b5-4098-86e5-b83f5118a08b\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"3d30730a-6c68-4a1d-9181-a23e2aaeccc1\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"}]},\"policyEnforcementMode\":0,\"deleteOlderTablesThanCurrentMonthMinusThis\":12,\"oldestRetainedTable\":\"0001-01-01T00:00:00\",\"mostRecentRetainedTable\":\"0001-01-01T00:00:00\",\"tableNames\":[\"WADMetricsPT1HP10DV2S20210218\",\"WADMetricsPT1HP10DV2S20210228\",\"WADMetricsPT1MP10DV2S20210218\",\"WADMetricsPT1MP10DV2S20210228\"]}},\"storageAccount\":{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":null,\"isSelected\":false,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":null,\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":null,\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":null,\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"},\"tableStoragePolicyEnforcementResult\":null,\"tableStorageEntityPolicyEnforcementResult\":null}]}}","output":"null","inputApplianceContext":{"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedSubscription":null,"selectedStorageAccountId":null,"selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","availableSubscriptions":[],"availableStorageAccounts":[],"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","tableRetentionResult":null,"tableEntityRetentionResult":null,"tableEntityRetentionPolicy":null,"tableRetentionPolicy":null,"retentionPolicyTuples":[],"retentionPolicyJobs":[{"id":"1c8f993e-7d71-4372-ab98-f2106d5199ab","tableStorageRetentionPolicy":{"id":"63e27ba5-ff64-4895-b8cf-b3322575e5d2","tableStorageEntityRetentionPolicy":{"id":"9dcd463e-8587-49c4-bd52-2ef63a115586","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"policyEnforcementMode":0,"numberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","tableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"id":"8103a5d2-1942-4094-a401-5eff7db5aefb","metricRetentionSurface":{"id":"83a521c5-9b0a-4bde-844b-28ae1e097d59","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"c2edb99b-1677-4897-81ff-3fbb37d08a41","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"5d5112bd-8145-427f-8f1e-ff2a396f210a","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"28694c9a-00b5-4098-86e5-b83f5118a08b","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"3d30730a-6c68-4a1d-9181-a23e2aaeccc1","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1HP10DV2S20210218","WADMetricsPT1HP10DV2S20210228","WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":null},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}},"runtimeStatus":0,"customStatus":"\"started\"","history":"null"}],"availableCommands":[{"availableCommandId":"57c3cf62-773b-426f-abf4-8e3a27862d20","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":0,"commandParameterJson":null,"worklowOperationDisplayMessage":"Please Initialize The Appliance","menuLabel":"Provision Appliance"},{"availableCommandId":"38000066-6d0e-4ef2-b8d8-639e9ba8c038","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":7,"commandParameterJson":null,"worklowOperationDisplayMessage":"Delete's The Appliance Configuration","menuLabel":"Cancel Workflow"},{"availableCommandId":"eca2de77-dfe2-4fc9-969a-3f2987afe883","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Accounts"},{"availableCommandId":"a1c3cfa0-faee-4086-ae81-e03102f5aab6","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions that have azure diagnostics entities","menuLabel":"Inventory Storage Account Entities"},{"availableCommandId":"a40a776c-ebbf-4813-9639-21f224527902","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":2,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Permissions"},{"availableCommandId":"450f445c-e4fa-434b-9653-aee5e79ef594","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":5,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to prune storage consumption by azure diagnostics over time","menuLabel":"Inventory Storage Account Entities Usage Over Time"}],"impersonationToken":"eyJ0eXAiO","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","isMustRenderApplianceConfig":false,"applianceSessionContext":{"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedSubscription":null,"selectedStorageAccountId":null,"selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","availableSubscriptions":[{"isSelected":false,"requestingAzureAdUserOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267","authorizationSource":"RoleBased","managedByTenants":[],"subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","displayName":"usataxlabs.app subscription","state":"Enabled","subscriptionPolicies":{"locationPlacementId":"Public_2014-09-01","quotaId":"PayAsYouGo_2014-09-01","spendingLimit":"Off"}}],"availableStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","tableRetentionResult":null,"tableEntityRetentionResult":null,"tableEntityRetentionPolicy":null,"tableRetentionPolicy":null,"retentionPolicyTuples":[],"retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","tableStorageRetentionPolicy":{"id":"6e49caf6-a289-4a9a-a0d1-a6780499c24a","tableStorageEntityRetentionPolicy":{"id":"a2f1ab13-cd60-41b4-ad70-3a9d174d9c67","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"policyEnforcementMode":0,"numberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","tableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"id":"5d76cdfe-62ba-47d9-89f6-390b9841092f","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":null},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}},"resetDeviceUrl":"DeleteWorkflowCheckpointEditMode/95e34c7e-8f5f-4379-bb63-4cb2e7944f3c/576bbe84-5a45-45e3-b578-b97b07d8f9ba"}

const mockApplianceSessionContext = {"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","operationResult":null,"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","RetentionPolicyTuples":{"item1":{"id":"da590fe0-d90c-4581-9805-144a52e82332","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"item2":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}},"tableStorageRetentionPolicy":{"id":"dcf554f1-1f96-4024-96af-efcc3dc22166","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}}
/**
 * supports local dev scenarios when the window origin is
 * one of the well known angular dev ports
 */
@Injectable()
export class MockOperatorPageModelInterceptor implements HttpInterceptor {

  constructor(private injector: Injector) {}

  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<any>> {
    const requestClone = request.clone();
    if(
      window.origin.includes(":4200")
      ||
      window.origin.includes(":9876")      )
      {
        // we will mock requests in dev environments
        // mock operatorPageModel
        if(requestClone.url.toLowerCase().includes("getoperatorpage"))
        {
          console.log("returning mocked pagemodel");
          return of(new HttpResponse({status: 200, body: mockOperatorPagemodel}));
        }
        else if(requestClone.url.toLowerCase().includes("getappliancesessioncontext"))
        {
          console.log("returning mocked appliance session context");
          return of(new HttpResponse({status: 200, body: mockApplianceSessionContext}));
        }
        else if(requestClone.url.toLowerCase().includes("getworkflowcheckpoint"))
        {
          console.log("returning mocked workflow checkpoint");
          return of(new HttpResponse({status: 200, body: mockWorkflowCheckpoint}));
        }
        else if(requestClone.url.toLowerCase().includes("getCurrentJobOutput".toLowerCase()))
        {
          console.log("returning mockCurrentJobOutput");
          return of(new HttpResponse({status: 200, body: mockCurrentJobOutput}));
        }
        else if(requestClone.url.toLowerCase().includes("GetRetentionPolicyForStorageAccount".toLowerCase()))
        {
          console.log("returning mockRetentionPolicyForStorageAccount");
          return of(new HttpResponse({status: 200, body: mockRetentionPolicyForStorageAccount}));
        }

      }
      else{
        console.log("mock interceptor not running");
      }

    return next.handle(request);
  }
}
