import { Injectable, Injector } from '@angular/core';

import {
  HttpRequest,
  HttpHandler,
  HttpEvent,
  HttpInterceptor,
  HttpResponse
} from '@angular/common/http';
import { Observable, of } from 'rxjs';

const mockJobLogEntity = {"userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","userTenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","rowCount":27,"logEntries":[{"timeStamp":"2021-07-24T04:46:28.3545099Z","summary":"storage accounts","detail":"workflow has validated storage account meta data.","severity":"info","source":"Start","executedCommand":{"availableCommandId":"7d25a269-1654-48f4-bf2e-c01cc6d90db9","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance will use your authentication token to retrieve storage accounts in your subscription.","menuLabel":"Get Storage Accounts"}},{"timeStamp":"2021-07-24T04:46:08.2145787Z","summary":"storage accounts","detail":"workflow is validating meta data for selected storage accounts.","severity":"info","source":"Start","executedCommand":{"availableCommandId":"7d25a269-1654-48f4-bf2e-c01cc6d90db9","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance will use your authentication token to retrieve storage accounts in your subscription.","menuLabel":"Get Storage Accounts"}},{"timeStamp":"2021-07-24T04:12:28.9458464Z","summary":"workflow started","detail":"workflow has retrieved appliance session context.","severity":"info","source":"Start","executedCommand":null},{"timeStamp":"2021-07-24T04:12:26.8531748Z","summary":"workflow running","detail":"building retention policy","severity":"info","source":"Start","executedCommand":{"availableCommandId":"5aa67bc2-c585-4cd0-add2-3bb00d18c844","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"TThe appliance will prepare metadata based on your selected storage accounts","menuLabel":"Build Retention Policy"}},{"timeStamp":"2021-07-24T04:12:26.8531748Z","summary":"workflow running","detail":"workflow is waiting for new commands","severity":"info","source":"Start","executedCommand":{"availableCommandId":"5aa67bc2-c585-4cd0-add2-3bb00d18c844","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"TThe appliance will prepare metadata based on your selected storage accounts","menuLabel":"Build Retention Policy"}}]};

const mockRetentionPolicyForStorageAccount = { "id": "b476a559-6cbd-4f96-a1c6-7bf332eca140", "tableStorageEntityRetentionPolicy": { "id": "dd99935d-f444-4010-838a-284f5776f559", "PolicyEnforcementMode": 0, "NumberOfDays": 30, "oldestRetainedEntity": "0001-01-01T00:00:00", "mostRecentRetainedEntity": "0001-01-01T00:00:00", "diagnosticsRetentionSurface": { "id": "25fa4a39-bbb0-4999-8dae-dee129898c29", "diagnosticsRetentionSurfaceEntities": [{ "itemDescriptor": 0, "itemType": 0, "itemDescription": "Syslog, Linux Virtual Machines", "itemExists": false, "itemWillBeDeleted": false, "id": "0c33aaae-e9d0-49b6-95ef-67bad9a140d7", "storageAccountId": null, "suscriptionId": null, "tableName": "LinuxsyslogVer2v0", "documentationLink": "https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 6, "itemType": 0, "itemDescription": "Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles", "itemExists": false, "itemWillBeDeleted": false, "id": "3df0f7c7-210a-4b44-9efc-ce2b52d933c6", "storageAccountId": null, "suscriptionId": null, "tableName": "WADWindowsEventLogsTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 7, "itemType": 0, "itemDescription": "Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles", "itemExists": false, "itemWillBeDeleted": false, "id": "3f524005-ce9a-4bf8-8272-b0a2ae1b98c8", "storageAccountId": null, "suscriptionId": null, "tableName": "WADETWEventTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 4, "itemType": 0, "itemDescription": "Logs written in code using the trace listener.", "itemExists": false, "itemWillBeDeleted": false, "id": "2c4306e2-d1d3-41e2-bd37-8cf92aec2c49", "storageAccountId": null, "suscriptionId": null, "tableName": "WadLogsTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 8, "itemType": 0, "itemDescription": "Diagnostic monitor and configuration changes.", "itemExists": false, "itemWillBeDeleted": false, "id": "2f249c4d-ac41-46f8-9194-978690667e00", "storageAccountId": null, "suscriptionId": null, "tableName": "WADDiagnosticInfrastructureLogsTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 8, "itemType": 0, "itemDescription": "Diagnostic monitor and configuration changes.", "itemExists": false, "itemWillBeDeleted": false, "id": "db103078-f013-4fe8-92d9-aa7ca5961134", "storageAccountId": null, "suscriptionId": null, "tableName": "WADDiagnosticInfrastructureLogsTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "itemDescriptor": 5, "itemType": 0, "itemDescription": "Performance counters.", "itemExists": false, "itemWillBeDeleted": false, "id": "72fc2bba-71aa-41ba-9a3a-6e48642fe113", "storageAccountId": null, "suscriptionId": null, "tableName": "WADPerformanceCountersTable", "documentationLink": "https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "0001-01-01T00:00:00", "entityTimestampLowWatermark": "0001-01-01T00:00:00", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }] }, "TableNames": ["LinuxsyslogVer2v0", "WADWindowsEventLogsTable", "WADETWEventTable", "WadLogsTable", "WADDiagnosticInfrastructureLogsTable", "WADDiagnosticInfrastructureLogsTable", "WADPerformanceCountersTable"] }, "tableStorageTableRetentionPolicy": { "wADMetricsTableNames": [], "id": "3abb6191-b604-4398-b139-2751f59601f4", "wADMetricsTableNamePrefix": "WADMetrics", "metricRetentionSurface": { "id": "1538f1d3-c3fd-49c9-b240-14e280b5b0c2", "aggregationPrefixes": ["PT1H", "PT1M"], "metricsRetentionSurfaceItemEntities": [{ "policyAgeTriggerInMonths": 12, "itemType": 1, "isDeleted": false, "itemDescription": "WADMetrics: Standard prefix for all WADMetrics tables", "itemExists": true, "itemWillBeDeleted": false, "id": "16ca3341-d185-4ea9-93d1-824eab32abe9", "storageAccountId": "/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage", "suscriptionId": null, "tableName": "WADMetricsPT1HP10DV2S20210228", "documentationLink": "https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "2021-03-02T20:00:20.181232Z", "entityTimestampLowWatermark": "2021-03-02T20:00:20.181232Z", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "policyAgeTriggerInMonths": 12, "itemType": 1, "isDeleted": false, "itemDescription": "WADMetrics: Standard prefix for all WADMetrics tables", "itemExists": true, "itemWillBeDeleted": false, "id": "543b7940-4183-497b-917b-0009271e8a27", "storageAccountId": "/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage", "suscriptionId": null, "tableName": "WADMetricsPT1HP10DV2S20210218", "documentationLink": "https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "2021-02-28T00:00:20.1839746Z", "entityTimestampLowWatermark": "2021-02-28T00:00:20.1839746Z", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "policyAgeTriggerInMonths": 12, "itemType": 1, "isDeleted": false, "itemDescription": "WADMetrics: Standard prefix for all WADMetrics tables", "itemExists": true, "itemWillBeDeleted": false, "id": "9d86ae62-22a6-4779-bcc6-9417088d75be", "storageAccountId": "/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage", "suscriptionId": null, "tableName": "WADMetricsPT1MP10DV2S20210218", "documentationLink": "https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "2021-02-28T00:00:55.0978361Z", "entityTimestampLowWatermark": "2021-02-28T00:00:55.0978361Z", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }, { "policyAgeTriggerInMonths": 12, "itemType": 1, "isDeleted": false, "itemDescription": "WADMetrics: Standard prefix for all WADMetrics tables", "itemExists": true, "itemWillBeDeleted": false, "id": "1fc5ac4e-4720-4969-8305-041adea0b250", "storageAccountId": "/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage", "suscriptionId": null, "tableName": "WADMetricsPT1MP10DV2S20210228", "documentationLink": "https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage", "mostRecentEntityTimestamp": "0001-01-01T00:00:00", "leastRecentEntityTimestamp": "2021-03-02T20:19:55.0963577Z", "entityTimestampLowWatermark": "2021-03-02T20:19:55.0963577Z", "entityTimestampHighWatermark": "0001-01-01T00:00:00" }] }, "policyEnforcementMode": 0, "deleteOlderTablesThanCurrentMonthMinusThis": 12, "oldestRetainedTable": "0001-01-01T00:00:00", "mostRecentRetainedTable": "0001-01-01T00:00:00", "tableNames": ["WADMetricsPT1HP10DV2S20210228", "WADMetricsPT1HP10DV2S20210218", "WADMetricsPT1MP10DV2S20210218", "WADMetricsPT1MP10DV2S20210228"] } };

const mockCurrentJobOutput ={"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","RetentionPolicyTuples":{"Item1":{"id":"da590fe0-d90c-4581-9805-144a52e82332","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"Item2":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}},"tableStorageRetentionPolicy":{"id":"dcf554f1-1f96-4024-96af-efcc3dc22166","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}

const mockMetricsRetentionPolicyEnforcementResult = {};

const mockWorkflowCheckpoint = {"timeStamp":"2021-07-18T05:29:46.642896Z","currentCheckpoint":1,"messsage":"manage your device","availableCommands":[{"availableCommandId":"11b137e9-62a7-4116-a9d4-2818ae93cbe0","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":0,"commandParameterJson":null,"worklowOperationDisplayMessage":"Please Initialize The Appliance","menuLabel":"Provision Appliance"},{"availableCommandId":"3e18e47f-0a02-40c6-bcba-e759ccd1f97b","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":7,"commandParameterJson":null,"worklowOperationDisplayMessage":"Delete's The Appliance Configuration","menuLabel":"Cancel Workflow"},{"availableCommandId":"2bb05923-66b4-4d1a-9c52-cd93f7e050f3","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":4,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to calculate storage consumption by azure diagnostics over time","menuLabel":"Inventory Storage Account Entities Usage Over Time"},{"availableCommandId":"30cfab3c-ae3a-4c17-bec7-45bcad4d5e1b","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Accounts"},{"availableCommandId":"374c4ff3-be7f-4169-8ad6-0e39dfa48d67","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions that have azure diagnostics entities","menuLabel":"Inventory Storage Account Entities"},{"availableCommandId":"975fa640-4b54-4c0f-91a4-d8e62ce813bf","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":2,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Permissions"}],"subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null};

const mockOperatorPagemodel = {"tenantid":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","oid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","applianceAPIEndPoint":null,"easyAuthAccessToken":"eyJhbGc","queryWorkflowCheckpointStatusEndpoint":"QueryWorkflowCheckpointStatus/95e34c7e-8f5f-4379-bb63-4cb2e7944f3c/576bbe84-5a45-45e3-b578-b97b07d8f9ba","allScopes":null,"subscriptions":[{"isSelected":false,"requestingAzureAdUserOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267","authorizationSource":"RoleBased","managedByTenants":[],"subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","displayName":"usataxlabs.app subscription","state":"Enabled","subscriptionPolicies":{"locationPlacementId":"Public_2014-09-01","quotaId":"PayAsYouGo_2014-09-01","spendingLimit":"Off"}}],"applianceUrl":["http://localhost:7071/api/"],"orchestrations":[{"name":"DebugWorkflowEntryPoint","instanceId":"c068459d-d209-ab03-10e3-3ea9953a0264","createdTime":"2021-07-10T15:47:58.7884742Z","lastUpdatedTime":"2021-07-10T15:50:45.0623227Z","input":"{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.ApplianceSessionContextEntity, com.ataxlab.functions.table.retention\",\"id\":\"0d7462ae-3594-47a6-b796-82c7cb82c4b8\",\"selectedSubscriptionId\":\"c295568c-70fe-4146-8bbc-63ef324fa267\",\"selectedStorageAccounts\":[{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":\"0e76962f-fa9d-4b5b-8086-62c8388aac46\",\"isSelected\":true,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":\"c295568c-70fe-4146-8bbc-63ef324fa267\",\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":\"eastus\",\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":\"Microsoft.Storage/storageAccounts\",\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"}],\"userOid\":\"0e76962f-fa9d-4b5b-8086-62c8388aac46\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\",\"operationResult\":null,\"jobOutput\":[],\"currentJobOutput\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.ApplianceJobOutputEntity, com.ataxlab.functions.table.retention\",\"id\":\"91bf6bfc-c3c2-49b6-8878-f27baeb1341c\",\"retentionPolicyJobs\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.RetentionPolicyTupleContainerEntity, com.ataxlab.functions.table.retention\",\"id\":\"1c8f993e-7d71-4372-ab98-f2106d5199ab\",\"RetentionPolicyTuples\":{\"$type\":\"System.Tuple`2[[com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention],[com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention]], System.Private.CoreLib\",\"Item1\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"331c9485-4dee-4712-b057-971fb3947407\",\"tableStorageEntityRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageEntityRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"e4a7b35f-4cb4-4238-b7e4-4a34cb218442\",\"PolicyEnforcementMode\":0,\"NumberOfDays\":30,\"oldestRetainedEntity\":\"0001-01-01T00:00:00\",\"mostRecentRetainedEntity\":\"0001-01-01T00:00:00\",\"diagnosticsRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"dabf246b-cd34-47b9-8e55-2e3b13056855\",\"diagnosticsRetentionSurfaceEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":0,\"itemType\":0,\"itemDescription\":\"Syslog, Linux Virtual Machines\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"1c689fbb-7ae2-44b5-a530-25d19f14c3f0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"LinuxsyslogVer2v0\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":6,\"itemType\":0,\"itemDescription\":\"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"e8a533c4-ab0f-409c-9cf2-07f4b5118405\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADWindowsEventLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":7,\"itemType\":0,\"itemDescription\":\"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADETWEventTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":4,\"itemType\":0,\"itemDescription\":\"Logs written in code using the trace listener.\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"cd1b60e4-8096-4e50-a89e-91d2fec16b65\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WadLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"82ecdf12-7600-4c8f-b695-3ef2f0500abd\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"112672ee-9f51-4a8b-84ba-9235dc2cbac4\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":5,\"itemType\":0,\"itemDescription\":\"Performance counters.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"78ea85e7-257a-4d2a-b4b6-a89eb5713b81\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADPerformanceCountersTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"}]},\"TableNames\":[\"LinuxsyslogVer2v0\",\"WADWindowsEventLogsTable\",\"WADETWEventTable\",\"WadLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADPerformanceCountersTable\"]},\"tableStorageTableRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageTableRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"wADMetricsTableNames\":[],\"id\":\"72006b01-e06b-46d9-bd04-b28a3d3e0bb7\",\"wADMetricsTableNamePrefix\":\"WADMetrics\",\"metricRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"83a521c5-9b0a-4bde-844b-28ae1e097d59\",\"aggregationPrefixes\":[\"PT1H\",\"PT1M\"],\"metricsRetentionSurfaceItemEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"c2edb99b-1677-4897-81ff-3fbb37d08a41\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"5d5112bd-8145-427f-8f1e-ff2a396f210a\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"28694c9a-00b5-4098-86e5-b83f5118a08b\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"3d30730a-6c68-4a1d-9181-a23e2aaeccc1\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"}]},\"policyEnforcementMode\":0,\"deleteOlderTablesThanCurrentMonthMinusThis\":12,\"oldestRetainedTable\":\"0001-01-01T00:00:00\",\"mostRecentRetainedTable\":\"0001-01-01T00:00:00\",\"tableNames\":[\"WADMetricsPT1HP10DV2S20210218\",\"WADMetricsPT1HP10DV2S20210228\",\"WADMetricsPT1MP10DV2S20210218\",\"WADMetricsPT1MP10DV2S20210228\"]}},\"Item2\":{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":null,\"isSelected\":false,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":null,\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":null,\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":null,\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"}},\"tableStorageRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"0e48332e-cec5-4c3d-9de2-b03b1a3dbd33\",\"tableStorageEntityRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageEntityRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"id\":\"e4a7b35f-4cb4-4238-b7e4-4a34cb218442\",\"PolicyEnforcementMode\":0,\"NumberOfDays\":30,\"oldestRetainedEntity\":\"0001-01-01T00:00:00\",\"mostRecentRetainedEntity\":\"0001-01-01T00:00:00\",\"diagnosticsRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"dabf246b-cd34-47b9-8e55-2e3b13056855\",\"diagnosticsRetentionSurfaceEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":0,\"itemType\":0,\"itemDescription\":\"Syslog, Linux Virtual Machines\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"1c689fbb-7ae2-44b5-a530-25d19f14c3f0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"LinuxsyslogVer2v0\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":6,\"itemType\":0,\"itemDescription\":\"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"e8a533c4-ab0f-409c-9cf2-07f4b5118405\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADWindowsEventLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":7,\"itemType\":0,\"itemDescription\":\"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADETWEventTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":4,\"itemType\":0,\"itemDescription\":\"Logs written in code using the trace listener.\",\"itemExists\":false,\"itemWillBeDeleted\":false,\"id\":\"cd1b60e4-8096-4e50-a89e-91d2fec16b65\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WadLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"82ecdf12-7600-4c8f-b695-3ef2f0500abd\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":8,\"itemType\":0,\"itemDescription\":\"Diagnostic monitor and configuration changes.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"112672ee-9f51-4a8b-84ba-9235dc2cbac4\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADDiagnosticInfrastructureLogsTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.DiagnosticsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"itemDescriptor\":5,\"itemType\":0,\"itemDescription\":\"Performance counters.\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"78ea85e7-257a-4d2a-b4b6-a89eb5713b81\",\"storageAccountId\":null,\"suscriptionId\":null,\"tableName\":\"WADPerformanceCountersTable\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data\"}]},\"TableNames\":[\"LinuxsyslogVer2v0\",\"WADWindowsEventLogsTable\",\"WADETWEventTable\",\"WadLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADDiagnosticInfrastructureLogsTable\",\"WADPerformanceCountersTable\"]},\"tableStorageTableRetentionPolicy\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.TableStorageTableRetentionPolicyEntity, com.ataxlab.functions.table.retention\",\"wADMetricsTableNames\":[],\"id\":\"72006b01-e06b-46d9-bd04-b28a3d3e0bb7\",\"wADMetricsTableNamePrefix\":\"WADMetrics\",\"metricRetentionSurface\":{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricRetentionSurfaceEntity, com.ataxlab.functions.table.retention\",\"id\":\"83a521c5-9b0a-4bde-844b-28ae1e097d59\",\"aggregationPrefixes\":[\"PT1H\",\"PT1M\"],\"metricsRetentionSurfaceItemEntities\":[{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"c2edb99b-1677-4897-81ff-3fbb37d08a41\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"5d5112bd-8145-427f-8f1e-ff2a396f210a\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1HP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"28694c9a-00b5-4098-86e5-b83f5118a08b\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210218\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"},{\"$type\":\"com.ataxlab.functions.table.retention.entities.MetricsRetentionSurfaceItemEntity, com.ataxlab.functions.table.retention\",\"policyAgeTriggerInMonths\":12,\"itemType\":1,\"isDeleted\":false,\"itemDescription\":\"WADMetrics: Standard prefix for all WADMetrics tables\",\"itemExists\":true,\"itemWillBeDeleted\":false,\"id\":\"3d30730a-6c68-4a1d-9181-a23e2aaeccc1\",\"storageAccountId\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"suscriptionId\":null,\"tableName\":\"WADMetricsPT1MP10DV2S20210228\",\"documentationLink\":\"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage\"}]},\"policyEnforcementMode\":0,\"deleteOlderTablesThanCurrentMonthMinusThis\":12,\"oldestRetainedTable\":\"0001-01-01T00:00:00\",\"mostRecentRetainedTable\":\"0001-01-01T00:00:00\",\"tableNames\":[\"WADMetricsPT1HP10DV2S20210218\",\"WADMetricsPT1HP10DV2S20210228\",\"WADMetricsPT1MP10DV2S20210218\",\"WADMetricsPT1MP10DV2S20210228\"]}},\"storageAccount\":{\"$type\":\"com.ataxlab.azure.table.retention.state.entities.StorageAccountEntity, com.ataxlab.functions.table.retention\",\"requestingAzureAdUserOid\":null,\"isSelected\":false,\"storageAccountKind\":\"StorageV2\",\"subscriptionId\":null,\"id\":\"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage\",\"location\":null,\"name\":\"usataxlabssaasstorage\",\"storageAccountType\":null,\"skuName\":\"Standard_LRS\",\"tenantId\":\"e14bb7b0-f325-41d8-89c4-c2b5f737c342\"},\"tableStoragePolicyEnforcementResult\":null,\"tableStorageEntityPolicyEnforcementResult\":null}]}}","output":"null","inputApplianceContext":{"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedSubscription":null,"selectedStorageAccountId":null,"selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","availableSubscriptions":[],"availableStorageAccounts":[],"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","tableRetentionResult":null,"tableEntityRetentionResult":null,"tableEntityRetentionPolicy":null,"tableRetentionPolicy":null,"retentionPolicyTuples":[],"retentionPolicyJobs":[{"id":"1c8f993e-7d71-4372-ab98-f2106d5199ab","tableStorageRetentionPolicy":{"id":"63e27ba5-ff64-4895-b8cf-b3322575e5d2","tableStorageEntityRetentionPolicy":{"id":"9dcd463e-8587-49c4-bd52-2ef63a115586","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"policyEnforcementMode":0,"numberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","tableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"id":"8103a5d2-1942-4094-a401-5eff7db5aefb","metricRetentionSurface":{"id":"83a521c5-9b0a-4bde-844b-28ae1e097d59","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"c2edb99b-1677-4897-81ff-3fbb37d08a41","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"5d5112bd-8145-427f-8f1e-ff2a396f210a","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"28694c9a-00b5-4098-86e5-b83f5118a08b","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"3d30730a-6c68-4a1d-9181-a23e2aaeccc1","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1HP10DV2S20210218","WADMetricsPT1HP10DV2S20210228","WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":null},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}},"runtimeStatus":0,"customStatus":"\"started\"","history":"null"}],"availableCommands":[{"availableCommandId":"57c3cf62-773b-426f-abf4-8e3a27862d20","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":0,"commandParameterJson":null,"worklowOperationDisplayMessage":"Please Initialize The Appliance","menuLabel":"Provision Appliance"},{"availableCommandId":"38000066-6d0e-4ef2-b8d8-639e9ba8c038","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":7,"commandParameterJson":null,"worklowOperationDisplayMessage":"Delete's The Appliance Configuration","menuLabel":"Cancel Workflow"},{"availableCommandId":"eca2de77-dfe2-4fc9-969a-3f2987afe883","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":6,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Accounts"},{"availableCommandId":"a1c3cfa0-faee-4086-ae81-e03102f5aab6","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":3,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions that have azure diagnostics entities","menuLabel":"Inventory Storage Account Entities"},{"availableCommandId":"a40a776c-ebbf-4813-9639-21f224527902","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":2,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to enumerate the storage accounts in your available subscriptions","menuLabel":"Inventory Storage Permissions"},{"availableCommandId":"450f445c-e4fa-434b-9653-aee5e79ef594","userOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","subscriptionName":null,"workflowOperation":5,"commandParameterJson":null,"worklowOperationDisplayMessage":"The appliance needs to prune storage consumption by azure diagnostics over time","menuLabel":"Inventory Storage Account Entities Usage Over Time"}],"impersonationToken":"eyJ0eXAiO","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","isMustRenderApplianceConfig":false,"applianceSessionContext":{"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedSubscription":null,"selectedStorageAccountId":null,"selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","availableSubscriptions":[{"isSelected":false,"requestingAzureAdUserOid":"95e34c7e-8f5f-4379-bb63-4cb2e7944f3c","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267","authorizationSource":"RoleBased","managedByTenants":[],"subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","displayName":"usataxlabs.app subscription","state":"Enabled","subscriptionPolicies":{"locationPlacementId":"Public_2014-09-01","quotaId":"PayAsYouGo_2014-09-01","spendingLimit":"Off"}}],"availableStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"576bbe84-5a45-45e3-b578-b97b07d8f9ba","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267"}],"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","tableRetentionResult":null,"tableEntityRetentionResult":null,"tableEntityRetentionPolicy":null,"tableRetentionPolicy":null,"retentionPolicyTuples":[],"retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","tableStorageRetentionPolicy":{"id":"6e49caf6-a289-4a9a-a0d1-a6780499c24a","tableStorageEntityRetentionPolicy":{"id":"a2f1ab13-cd60-41b4-ad70-3a9d174d9c67","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"policyEnforcementMode":0,"numberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","tableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"id":"5d76cdfe-62ba-47d9-89f6-390b9841092f","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","subscriptionId":null},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}},"resetDeviceUrl":"DeleteWorkflowCheckpointEditMode/95e34c7e-8f5f-4379-bb63-4cb2e7944f3c/576bbe84-5a45-45e3-b578-b97b07d8f9ba"}

const mockApplianceSessionContext = {"id":"0d7462ae-3594-47a6-b796-82c7cb82c4b8","selectedSubscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","selectedStorageAccounts":[{"requestingAzureAdUserOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","isSelected":true,"storageAccountKind":"StorageV2","subscriptionId":"c295568c-70fe-4146-8bbc-63ef324fa267","id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":"eastus","name":"usataxlabssaasstorage","storageAccountType":"Microsoft.Storage/storageAccounts","skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}],"userOid":"0e76962f-fa9d-4b5b-8086-62c8388aac46","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342","operationResult":null,"jobOutput":[],"currentJobOutput":{"id":"91bf6bfc-c3c2-49b6-8878-f27baeb1341c","retentionPolicyJobs":[{"id":"b1213edc-1d0d-48f6-9fcd-3bb986cd3fe6","RetentionPolicyTuples":{"item1":{"id":"da590fe0-d90c-4581-9805-144a52e82332","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"item2":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"}},"tableStorageRetentionPolicy":{"id":"dcf554f1-1f96-4024-96af-efcc3dc22166","tableStorageEntityRetentionPolicy":{"id":"e4a7b35f-4cb4-4238-b7e4-4a34cb218442","PolicyEnforcementMode":0,"NumberOfDays":30,"oldestRetainedEntity":"0001-01-01T00:00:00","mostRecentRetainedEntity":"0001-01-01T00:00:00","diagnosticsRetentionSurface":{"id":"dabf246b-cd34-47b9-8e55-2e3b13056855","diagnosticsRetentionSurfaceEntities":[{"itemDescriptor":0,"itemType":0,"itemDescription":"Syslog, Linux Virtual Machines","itemExists":false,"itemWillBeDeleted":false,"id":"1c689fbb-7ae2-44b5-a530-25d19f14c3f0","storageAccountId":null,"suscriptionId":null,"tableName":"LinuxsyslogVer2v0","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":6,"itemType":0,"itemDescription":"Windows Event Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":true,"itemWillBeDeleted":false,"id":"e8a533c4-ab0f-409c-9cf2-07f4b5118405","storageAccountId":null,"suscriptionId":null,"tableName":"WADWindowsEventLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":7,"itemType":0,"itemDescription":"Windows ETW Logs - Service Fabric, Virtual Machines, Web Roles, Worker Roles","itemExists":false,"itemWillBeDeleted":false,"id":"3371d53b-fc00-44a7-bf27-4d31d1f1a3c0","storageAccountId":null,"suscriptionId":null,"tableName":"WADETWEventTable","documentationLink":"https://docs.microsoft.com/en-us/azure/azure-monitor/agents/diagnostics-extension-logs"},{"itemDescriptor":4,"itemType":0,"itemDescription":"Logs written in code using the trace listener.","itemExists":false,"itemWillBeDeleted":false,"id":"cd1b60e4-8096-4e50-a89e-91d2fec16b65","storageAccountId":null,"suscriptionId":null,"tableName":"WadLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"82ecdf12-7600-4c8f-b695-3ef2f0500abd","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":8,"itemType":0,"itemDescription":"Diagnostic monitor and configuration changes.","itemExists":true,"itemWillBeDeleted":false,"id":"112672ee-9f51-4a8b-84ba-9235dc2cbac4","storageAccountId":null,"suscriptionId":null,"tableName":"WADDiagnosticInfrastructureLogsTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"},{"itemDescriptor":5,"itemType":0,"itemDescription":"Performance counters.","itemExists":true,"itemWillBeDeleted":false,"id":"78ea85e7-257a-4d2a-b4b6-a89eb5713b81","storageAccountId":null,"suscriptionId":null,"tableName":"WADPerformanceCountersTable","documentationLink":"https://docs.microsoft.com/en-us/azure/cloud-services/diagnostics-extension-to-storage#tools-to-view-diagnostic-data"}]},"TableNames":["LinuxsyslogVer2v0","WADWindowsEventLogsTable","WADETWEventTable","WadLogsTable","WADDiagnosticInfrastructureLogsTable","WADDiagnosticInfrastructureLogsTable","WADPerformanceCountersTable"]},"tableStorageTableRetentionPolicy":{"wADMetricsTableNames":[],"id":"69a48e07-f95b-4bbd-8873-398568477d11","wADMetricsTableNamePrefix":"WADMetrics","metricRetentionSurface":{"id":"cc0f9ec5-88a4-4aa9-9022-b1ab339ad3d2","aggregationPrefixes":["PT1H","PT1M"],"metricsRetentionSurfaceItemEntities":[{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"747f4278-0e7b-47dd-9449-1731c4f4c113","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210218","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"f62c38ba-a1bf-4342-bb32-87338a663613","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1MP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"},{"policyAgeTriggerInMonths":12,"itemType":1,"isDeleted":false,"itemDescription":"WADMetrics: Standard prefix for all WADMetrics tables","itemExists":true,"itemWillBeDeleted":false,"id":"72d9d91f-6107-467f-9aa7-dee5bbf6241f","storageAccountId":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","suscriptionId":null,"tableName":"WADMetricsPT1HP10DV2S20210228","documentationLink":"https://docs.microsoft.com/en-us/azure/virtual-machines/extensions/diagnostics-template#wadmetrics-tables-in-storage"}]},"policyEnforcementMode":0,"deleteOlderTablesThanCurrentMonthMinusThis":12,"oldestRetainedTable":"0001-01-01T00:00:00","mostRecentRetainedTable":"0001-01-01T00:00:00","tableNames":["WADMetricsPT1MP10DV2S20210218","WADMetricsPT1MP10DV2S20210228","WADMetricsPT1HP10DV2S20210228"]}},"storageAccount":{"requestingAzureAdUserOid":null,"isSelected":false,"storageAccountKind":"StorageV2","subscriptionId":null,"id":"/subscriptions/c295568c-70fe-4146-8bbc-63ef324fa267/resourceGroups/usataxlabs-saas-generalstorageacct_rg/providers/Microsoft.Storage/storageAccounts/usataxlabssaasstorage","location":null,"name":"usataxlabssaasstorage","storageAccountType":null,"skuName":"Standard_LRS","tenantId":"e14bb7b0-f325-41d8-89c4-c2b5f737c342"},"tableStoragePolicyEnforcementResult":null,"tableStorageEntityPolicyEnforcementResult":null}]}}
/**
 * supports local dev scenarios when the window origin is
 * one of the well known angular dev ports
 */
@Injectable()
export class MockOperatorPageModelInterceptor implements HttpInterceptor {

  constructor(private injector: Injector) {}

  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<any>> {
    const requestClone = request.clone();
    if(
      window.origin.includes(":4200")
      ||
      window.origin.includes(":9876")      )
      {
        // we will mock requests in dev environments
        // mock operatorPageModel
        if(requestClone.url.toLowerCase().includes("getoperatorpage"))
        {
          console.log("returning mocked pagemodel");
          return of(new HttpResponse({status: 200, body: mockOperatorPagemodel}));
        }
        else if(requestClone.url.toLowerCase().includes("getappliancesessioncontext"))
        {
          console.log("returning mocked appliance session context");
          return of(new HttpResponse({status: 200, body: mockApplianceSessionContext}));
        }
        else if(requestClone.url.toLowerCase().includes("getworkflowcheckpoint"))
        {
          console.log("returning mocked workflow checkpoint");
          return of(new HttpResponse({status: 200, body: mockWorkflowCheckpoint}));
        }
        else if(requestClone.url.toLowerCase().includes("getCurrentJobOutput".toLowerCase()))
        {
          console.log("returning mockCurrentJobOutput");
          return of(new HttpResponse({status: 200, body: mockCurrentJobOutput}));
        }
        else if(requestClone.url.toLowerCase().includes("GetRetentionPolicyForStorageAccount".toLowerCase()))
        {
          console.log("returning mockRetentionPolicyForStorageAccount");
          return of(new HttpResponse({status: 200, body: mockRetentionPolicyForStorageAccount}));
        }
        else if(requestClone.url.toLowerCase().includes("GetApplianceLogEntries".toLowerCase()))
        {
          console.log("returning mockJobLogEntity. total log size reported as " + mockJobLogEntity.rowCount);
          return of(new HttpResponse({status: 200, body: mockJobLogEntity}));
        }

      }
      else{
        console.log("mock interceptor not running");
      }

    return next.handle(request);
  }
}
