<ng-container
  *ngIf="metricsRetentionSurfaceEntityChanges$ | async as jobs; else noAccount"
>
  <div clas="card metricscard">

    <p-dataView [value]="jobs"
                layout="grid"
                [paginator]="true"
                [rows]="1"
    >

      <ng-template pTemplate="header">
        <div class="p-d-flex p-flex-column p-flex-md-row p-jc-md-between">
          <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
          <div>Metrics Retention Surface</div>
        </div>
      </ng-template>

      <ng-template let-job pTemplate="listItem">
        <div>
          {{ job.tableName }}
        </div>
      </ng-template>

      <ng-template let-job pTemplate="gridItem">
        <div class="p-col-12 ">
        <p-card class="card">
          <ng-template pTemplate="subtitle">{{ job.tableName }} </ng-template>
          <ng-template class="p-d-flex" style="border: 8px;" pTemplate="content">
            <div class="p-d-flex">
            <div class="p-d-inline-flex">
              <p-timeline [value]="job | datesToTimeLineEventsPipe">
                <ng-template pTemplate="content" let-event>
                  {{ event.timestamp }}
                </ng-template>
                <ng-template pTemplate="opposite" let-event>
                  {{ event.itemDescription }}
                </ng-template>
              </p-timeline>
            </div>
            <div class="p-d-inline-flex">
              <table>
                <tr>
                  <td>Item Exists?</td>
                  <td>{{ job.itemExists }}</td>
                </tr>


                <tr>
                  <td><span>will be deleted?: </span></td>
                  <td>{{ job.itemWillBeDeleted }}</td>
                </tr>
              </table>
            </div>
            </div>
          </ng-template>
          <ng-template pTemplate="footer">
            <p>
              <a href="{{ job.documentationLink }}">{{ job.itemDescription }}</a>

              </p>

          </ng-template>
        </p-card>
        </div>
      </ng-template>


      <ng-template pTemplate="footer">
        <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
      </ng-template>
    </p-dataView>
  </div>
</ng-container>

<ng-template #noAccount>
  <span>no retention jobs available</span>
</ng-template>
